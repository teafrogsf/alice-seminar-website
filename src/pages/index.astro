---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import SeminarCard from '../components/SeminarCard.astro';
import fs from 'fs';
import yaml from 'js-yaml';
import path from 'path';

// Load seminar data
const dataPath = path.join(process.cwd(), 'data', 'seminars.yaml');
const fileContents = fs.readFileSync(dataPath, 'utf8');
const data = yaml.load(fileContents) as { upcoming: any[]; archive: any[] };

// Sort upcoming seminars by date (earliest first)
const upcomingSeminars = (data.upcoming || []).sort((a, b) => {
  return new Date(a.date).getTime() - new Date(b.date).getTime();
});
---

<Layout title="ALICE Seminar - 首页">
  <Hero />

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <!-- Section Title -->
    <div class="mb-12">
      <h2 class="text-4xl font-serif font-bold text-alice-text mb-4">
        即将举行
      </h2>
    </div>

    <!-- Upcoming Seminars -->
    {upcomingSeminars.length > 0 ? (
      <div class="space-y-8">
        {upcomingSeminars.map((seminar) => (
          <SeminarCard seminar={seminar} />
        ))}
      </div>
    ) : (
      <div class="bg-white rounded-lg shadow-md p-12 text-center">
        <p class="text-alice-gray text-lg">
          暂无即将举行的研讨会，敬请期待
        </p>
        <p class="text-alice-light-gray text-sm mt-2">
          您可以查看<a href="/archive" class="underline hover:text-alice-text">往期归档</a>
        </p>
      </div>
    )}

    <!-- Call to Action -->
    <div class="mt-16 text-center">
      <div class="bg-gradient-to-r from-alice-bg to-white rounded-lg p-8">
        <h3 class="text-2xl font-serif font-bold text-alice-text mb-3">
          了解更多
        </h3>
        <p class="text-alice-gray mb-6">
          查看往期研讨会记录，或了解 ALICE Seminar 的更多信息
        </p>
        <div class="flex justify-center space-x-4">
          <a 
            href="/archive" 
            class="px-6 py-3 bg-alice-text text-white rounded-md hover:bg-alice-gray transition-colors font-medium"
          >
            浏览归档
          </a>
          <a 
            href="/about" 
            class="px-6 py-3 border-2 border-alice-text text-alice-text rounded-md hover:bg-alice-text hover:text-white transition-colors font-medium"
          >
            关于我们
          </a>
        </div>
      </div>
    </div>
  </div>
</Layout>

